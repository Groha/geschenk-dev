import"./app.min.js";let u=[],a=[];const l=document.querySelector(".products-page__cards"),m=document.documentElement,n=document.querySelector(".filters"),v=n.querySelector(".filters__btn"),h=n.querySelector(".filters__overlay"),g=n.querySelector(".filters__reset"),k=document.querySelector(".filters__close"),L=document.getElementById("filters-form");function E(){n.classList.add("filters--open"),m.setAttribute("data-fls-scrolllock","")}function o(){n.classList.remove("filters--open"),m.removeAttribute("data-fls-scrolllock")}async function b(){try{const e=await fetch("https://groha.github.io/geschenk-dev/files/products.json");if(!e.ok)throw new Error("\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u0442\u043E\u0432\u0430\u0440\u043E\u0432");u=await e.json(),a=u,f(a)}catch(e){console.error(e),l.innerHTML='<p class="error">\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u0442\u043E\u0432\u0430\u0440\u044B \u{1F622}</p>'}}function f(e){const s=Array.from(l.querySelectorAll(".product"));s.forEach((t,r)=>{t.classList.add("fade-out"),t.style.transitionDelay=`${r*100}ms`});const i=300+s.length*50;setTimeout(()=>{if(l.innerHTML="",!e.length){l.innerHTML='<p class="no-results">\u041D\u0438\u0447\u0435\u0433\u043E \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u043E \u{1F614}</p>';return}e.forEach((t,r)=>{const d=r*200,c=document.createElement("article");c.className="products__card card fade-in",c.style.animationDelay=`${d}ms`,c.innerHTML=`
        <a href="https://groha.github.io/geschenk-dev/product" class="card__link">
          <div class="card__image">
            <img src="${t.img}" alt="${t.title}">
          </div>
          <div class="card__text">
            <h4 class="card__title">${t.title}</h4>
            <p class="card__description">${t.description}</p>
            <div class="card__footer">
              <p class="card__price">$ ${t.price}</p>
              <div class="card__button button button--transparent button--small" role="button">kaufen</div>
            </div>
          </div>
        </a>
      `,l.appendChild(c)})},i)}function y(){const e=document.querySelector('input[name="category"]:checked')?.value||"all",s=document.querySelector('input[name="price"]:checked')?.value||"all",i=document.querySelector('input[name="size"]:checked')?.value||"all",t=document.querySelector('input[name="gender"]:checked')?.value||"all";a=u.filter(r=>{const d=e==="all"||r.category===e;let c=!0;s==="low"?c=r.price<=30:s==="mid"?c=r.price>30&&r.price<=60:s==="high"&&(c=r.price>60);const p=i==="all"||r.size===i,_=t==="all"||r.gender===t;return d&&c&&p&&_}),f(a)}document.getElementById("filters-form").addEventListener("submit",e=>{e.preventDefault(),y(),o()}),v.addEventListener("click",E),k.addEventListener("click",o),h.addEventListener("click",o),document.addEventListener("keydown",e=>{e.key==="Escape"&&n.classList.contains("filters--open")&&o()}),g.addEventListener("click",()=>{L.reset(),y(),o()}),b();
