import{g}from"./app.min.js";function v(){const t=document.querySelectorAll("[data-fls-rating]");t&&t.forEach(e=>{const a=+e.dataset.flsRatingValue,n=+e.dataset.flsRatingSize?+e.dataset.flsRatingSize:5;o(e,n),a&&i(e,a),document.addEventListener("click",r)});function r(e){const a=e.target;if(a.closest(".rating__input")){const n=a.closest(".rating__input"),l=+n.value,c=n.closest(".rating");c.dataset.flsRating==="set"&&s(c,l)}}function o(e,a){let n="";for(let l=0;l<a;l++)l===0&&(n+='<div class="rating__items">'),n+=`
				<label class="rating__item">
					<input class="rating__input" type="radio" name="rating" value="${l+1}">
				</label>`,l===a&&(n+='</div">');e.insertAdjacentHTML("beforeend",n)}function s(e,a){i(e,a)}function i(e,a){const n=e.querySelectorAll(".rating__item"),l=parseInt(a),c=a-l;e.hasAttribute("data-rating-title")&&(e.title=a),n.forEach((f,d)=>{f.classList.remove("rating__item--active"),f.querySelector("span")&&n[d].querySelector("span").remove(),d<=l-1&&f.classList.add("rating__item--active"),d===l&&c&&f.insertAdjacentHTML("beforeend",`<span style="width:${c*100}%"></span>`)})}}document.querySelector("[data-fls-rating]")&&window.addEventListener("load",v);let u={getErrors(t){let r=0,o=t.querySelectorAll("[required]");return o.length&&o.forEach(s=>{(s.offsetParent!==null||s.tagName==="SELECT")&&!s.disabled&&(r+=this.validateInput(s))}),r},validateInput(t){let r=0;return t.type==="email"?(t.value=t.value.replace(" ",""),this.emailTest(t)?(this.addError(t),this.removeSuccess(t),r++):(this.removeError(t),this.addSuccess(t))):t.type==="checkbox"&&!t.checked?(this.addError(t),this.removeSuccess(t),r++):t.value.trim()?(this.removeError(t),this.addSuccess(t)):(this.addError(t),this.removeSuccess(t),r++),r},addError(t){t.classList.add("--form-error"),t.parentElement.classList.add("--form-error");let r=t.parentElement.querySelector("[data-fls-form-error]");r&&t.parentElement.removeChild(r),t.dataset.flsFormErrtext&&t.parentElement.insertAdjacentHTML("beforeend",`<div data-fls-form-error>${t.dataset.flsFormErrtext}</div>`)},removeError(t){t.classList.remove("--form-error"),t.parentElement.classList.remove("--form-error"),t.parentElement.querySelector("[data-fls-form-error]")&&t.parentElement.removeChild(t.parentElement.querySelector("[data-fls-form-error]"))},addSuccess(t){t.classList.add("--form-success"),t.parentElement.classList.add("--form-success")},removeSuccess(t){t.classList.remove("--form-success"),t.parentElement.classList.remove("--form-success")},formClean(t){t.reset(),setTimeout(()=>{let r=t.querySelectorAll("input,textarea");for(let s=0;s<r.length;s++){const i=r[s];i.parentElement.classList.remove("--form-focus"),i.classList.remove("--form-focus"),u.removeError(i)}let o=t.querySelectorAll('input[type="checkbox"]');if(o.length&&o.forEach(s=>{s.checked=!1}),window.flsSelect){let s=t.querySelectorAll("select[data-fls-select]");s.length&&s.forEach(i=>{window.flsSelect.selectBuild(i)})}},0)},emailTest(t){return!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(t.value)}};function E(){function t(){const o=document.forms;if(o.length)for(const e of o)e.hasAttribute("data-fls-form-novalidate")||e.setAttribute("novalidate",!0),e.addEventListener("submit",function(a){const n=a.target;s(n,a)}),e.addEventListener("reset",function(a){const n=a.target;u.formClean(n)});async function s(e,a){if(u.getErrors(e)===0)if(e.dataset.flsForm==="ajax"){a.preventDefault();const l=e.getAttribute("action")?e.getAttribute("action").trim():"#",c=e.getAttribute("method")?e.getAttribute("method").trim():"GET",f=new FormData(e);e.classList.add("--sending");const d=await fetch(l,{method:c,body:f});if(d.ok){let m=await d.json();e.classList.remove("--sending"),i(e,m)}else e.classList.remove("--sending")}else e.dataset.flsForm==="dev"&&(a.preventDefault(),i(e));else if(a.preventDefault(),e.querySelector(".--form-error")&&e.hasAttribute("data-fls-form-gotoerr")){const l=e.dataset.flsFormGotoerr?e.dataset.flsFormGotoerr:".--form-error";g(l)}}function i(e,a=""){document.dispatchEvent(new CustomEvent("formSent",{detail:{form:e}})),setTimeout(()=>{if(window.flsPopup){const n=e.dataset.flsFormPopup;n&&window.flsPopup.open(n)}},0),u.formClean(e)}}function r(){document.body.addEventListener("focusin",function(o){const s=o.target;(s.tagName==="INPUT"||s.tagName==="TEXTAREA")&&(s.hasAttribute("data-fls-form-nofocus")||(s.classList.add("--form-focus"),s.parentElement.classList.add("--form-focus")),s.hasAttribute("data-fls-form-validatenow")&&u.removeError(s))}),document.body.addEventListener("focusout",function(o){const s=o.target;(s.tagName==="INPUT"||s.tagName==="TEXTAREA")&&(s.hasAttribute("data-fls-form-nofocus")||(s.classList.remove("--form-focus"),s.parentElement.classList.remove("--form-focus")),s.hasAttribute("data-fls-form-validatenow")&&u.validateInput(s))})}t(),r()}document.querySelector("[data-fls-form]")&&window.addEventListener("load",E);
